{
  "atom_library": {
    "i_chem_baseline_ph_gh_kh": {
      "type": "instruction",
      "text_template": "Measure your baseline pH, GH, and KH so we know your starting water chemistry.",
      "conditions": []
    },
    "i_chem_nitrate_progress_check": {
      "type": "instruction",
      "text_template": "Check Nitrates once a week. If Nitrates are rising, it confirms your bacteria are successfully converting the toxic Nitrite."
    },
    "i_chem_nitrite_watch": {
      "type": "instruction",
      "text_template": "Start checking Nitrite. It will likely be 0 ppm for a while, but as soon as it registers on the test (turns purple), we will move on to the next phase."
    },
    "i_chem_conditioner_binding_note": {
      "type": "instruction",
      "text_template": "Note: Water conditioners only 'bind' ammonia for ~24 hours to protect fish; they do not remove it. You must keep testing."
    },
    "i_chem_wait_24h_before_test": {
      "type": "instruction",
      "text_template": "Wait exactly 24 hours after dosing ammonia before performing the final tests. Do not test early."
    },
    "i_chem_completion_test_fail_back": {
      "type": "instruction",
      "text_template": "If the test fails (ammonia or nitrite above 0), return to the previous phase and keep cycling for a few more days."
    },
    "t_chem_test": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "{{variant}}",
      "text_variants": {
        "default": "Measure and log {{parameter_label}}.",
        "after_24h": "Measure and log {{parameter_label}} after 24 hours."
      },
      "args_schema": {
        "parameter": [
          "ammonia",
          "nitrite",
          "nitrate",
          "ph",
          "gh",
          "kh"
        ],
        "cadence": [
          "one_time",
          "daily",
          "weekly",
          "interval",
          "per_event"
        ],
        "variant": [
          "default",
          "after_24h"
        ],
        "every_days": "number"
      },
      "conditions": []
    },
    "i_co2_adjust_safe_before_stocking": {
      "type": "instruction",
      "text_template": "IMPORTANT: Dial back your CO2 injection. We need the drop checker to read a solid **Lime Green** (not yellow) before the fish arrive to ensure they have enough oxygen."
    },
    "i_co2_monitor_stability": {
      "type": "instruction",
      "text_template": "Stability is key. Your CO2 is already optimized (Lime Green). Monitor fish for gasping; if they are fine, do not change the settings."
    },
    "i_co2_off_guidance": {
      "type": "instruction",
      "text_template": "Keep CO2 OFF for now to protect fish. During cycling and early stocking, oxygen is limited and CO2 can make that worse. We'll turn CO2 on once the tank is stable."
    },
    "i_co2_target": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "dark_green": "Start CO2 (~{{doses.co2.bps_dark_green}} BPS). Check drop checker after 2-3 hours. Aim for **Dark Green** (Safe).",
        "yellow_green": "Since there are no fish, you can run CO2 slightly higher than normal (~{{doses.co2.bps_lime_green}} BPS) target **Yellow-Green** color on the drop checker. This maximizes plant growth and suppresses algae during the ammonia spikes.",
        "lime_green": "CO2 safety check before stocking: ensure the drop checker is **Lime Green**, not Yellow. If it is Yellow, dial it back and wait 2 hours before adding fish."
      },
      "args_schema": {
        "target": [
          "dark_green",
          "yellow_green",
          "lime_green"
        ]
      }
    },
    "i_co2_timer_on_off": {
      "type": "instruction",
      "text_template": "Set CO2 timer: ON 1 hour before lights and OFF 1 hour before lights out."
    },
    "t_co2_adjust_safe": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Dial back CO2 to a solid Lime Green on the drop checker."
    },
    "t_co2_confirm_off": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Confirm: CO2 OFF."
    },
    "t_co2_maintenance_monthly": {
      "type": "task",
      "cadence": "monthly",
      "text_template": "CO2 Maintenance: Change drop checker fluid and clean diffuser."
    },
    "t_co2_turn_on": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on CO2 system."
    },
    "i_cycle_nitrite_spike_warning": {
      "type": "instruction",
      "text_template": "Nitrite is now spiking. This is the longest part of the cycle. Do NOT add livestock yet."
    },
    "i_cycle_nitrite_lock_check": {
      "type": "instruction",
      "text_template": "Is Nitrite still 'off the charts' (instantly deep purple)? If it has been stuck at the maximum reading for >7 days, perform a 50% water change. **Why?** Extremely high Nitrite can sometimes block the bacteria from working. A water change helps 'unclog' the biological traffic jam."
    },
    "i_cycle_ammonia_advice": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "inert:true": "You will begin manual ammonia dosing to start the cycle.",
        "inert:false": "Inert substrate requires an ammonia source to begin the cycle. Since you have selected not to use a source of ammonia, your best bet is to ghost feed the tank, to make decaying food act as an ammonia source.",
        "aquasoil:any": "Since you're using aquasoil that's designed to leach ammonia for the first few weeks when it's submerged, you have an automatic ammonia dispenser. If Ammonia rises above >5 ppm, do a 50% water change."
      },
      "args_schema": {
        "substrate": [
          "inert",
          "aquasoil"
        ],
        "ammonia_selected": [
          true,
          false
        ]
      }
    },
    "i_cycle_nitrite_clear_goal": {
      "type": "instruction",
      "text_template": "The Goal: We are waiting for the day when you test and see 0 ppm Ammonia AND 0 ppm Nitrite. When that happens, your bacteria are ready for the final 24-hour challenge."
    },
    "i_cycle_algae_light_warning": {
      "type": "instruction",
      "text_template": "Warning: High Ammonia combined with strong light often triggers algae. If you don't have many plants yet, keep your lighting duration short (6 hours max).",
      "conditions": []
    },
    "t_cycle_ammonia_dose_when_zero": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Only if Ammonia is 0 ppm: Add {{doses.ammonia_source.ammonia_ml_range}} mL of {{products.ammonia_source.display_name}}."
    },
    "t_cycle_ammonia_dose_initial": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "{{variant}}",
      "text_variants": {
        "true": "Add {{doses.ammonia_source.ammonia_ml_range}} mL of {{products.ammonia_source.display_name}}.",
        "false": "Ghost feed the tank so decaying food can act as an ammonia source."
      },
      "args_schema": {
        "ammonia_source": [
          true,
          false
        ]
      }
    },
    "t_cycle_bacteria_dose_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Add {{products.bacteria_starter.dose_text}} of {{products.bacteria_starter.display_name}}."
    },
    "t_cycle_bacteria_dose_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Add {{products.bacteria_starter.display_name}} (Check label for 'New Tank' dose)."
    },
    "t_cycle_dose_bacteria": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "{{variant}}",
      "text_variants": {
        "one_time": "Add {{products.bacteria_starter.display_name}} (Check label for 'New Tank' dose).",
        "daily": "Add {{products.bacteria_starter.dose_text}} of {{products.bacteria_starter.display_name}}.",
        "weekly": "Add {{products.bacteria_starter.dose_text}} of {{products.bacteria_starter.display_name}}."
      },
      "args_schema": {
        "cadence": [
          "one_time",
          "daily",
          "weekly"
        ]
      }
    },
    "e_water_cloudy_bloom": {
      "type": "expected_behaviour",
      "text_template": "Cloudy or milky water is normal early on. It can be substrate dust, microbubbles, or a bacterial bloom. Unless we say otherwise, don't chase it with big water changes.",
      "conditions": []
    },
    "e_plant_melt_high_ammonia": {
      "type": "expected_behaviour",
      "text_template": "Note: High ammonia (>2ppm) can sometimes melt delicate plant tissues. Monitor them closely and do a small water change if melting is severe."
    },
    "e_water_surface_scum": {
      "type": "expected_behaviour",
      "text_template": "You might see an oily film or foam on the water surface. This is protein biofilm. It is harmless and will be removed when we install the skimmer or do water changes later."
    },
    "e_cycle_ammonia_drop_speed": {
      "type": "expected_behaviour",
      "text_template": "Initially, ammonia will drop very slowly. As the colony grows, you will notice it dropping faster, requiring more frequent redosing. This acceleration is the goal."
    },
    "e_cycle_nitrite_plateau": {
      "type": "expected_behaviour",
      "text_template": "The 'Nitrite Plateau':  You might see the Nitrite test turn deep purple and stay there for weeks. This is normal. The bacteria that eat Nitrite grow much slower than the ones that eat Ammonia. Patience is key."
    },
    "e_cycle_lag_phase": {
      "type": "expected_behaviour",
      "text_template": "The 'Lag Phase': It is perfectly normal to see NO movement in Ammonia or Nitrite for the first 7-14 days. The bacteria are multiplying invisibly. Do not add more bacteria or change water; just wait."
    },
    "e_bio_slimy_walls": {
      "type": "expected_behaviour",
      "text_template": "The glass and heater might feel slimy to the touch. This is the bacteria colonizing surfaces. Do not scrub it off yet."
    },
    "e_plant_transition": {
      "type": "expected_behaviour",
      "text_template": "You may see some plants melting or losing leaves while others grow new roots. This transition is normal as they adapt to your water. Trim melting leaves so they don't rot."
    },
    "e_cycle_purple_nitrite": {
      "type": "expected_behaviour",
      "text_template": "Your Nitrite test will likely turn bright purple immediately and stay off the charts for weeks. This is not a stall; it is just a very high peak. Keep going."
    },
    "e_cycle_ammonia_hunger": {
      "type": "expected_behaviour",
      "text_template": "Your Ammonia will now drop to 0 ppm very quickly (often within 24 hours). This is great. The first half of your filter is complete. You must keep feeding it while waiting for the Nitrite to drop."
    },
    "e_bio_detritus_buildup": {
      "type": "expected_behaviour",
      "text_template": "You may see brown fluff or debris settling on the bottom. This is dead bacterial biomass and is a normal byproduct of a heavy cycle. We will vacuum it out later."
    },
    "e_cycle_diatoms_brown_algae": {
      "type": "expected_behaviour",
      "text_template": "Expect brown algae (diatoms) as a dusty coating on glass, plants, and hardscape. It's the classic ugly phase and a normal sign your cycle is maturing. Don't deep clean it; it fades on its own.",
      "conditions": []
    },
    "e_chem_nitrate_fert_high_note": {
      "type": "expected_behaviour",
      "text_template": "Note: If your fertilizer contains Nitrogen (check the label for 'N'), your Nitrate tests will read artificially high. Rely on Ammonia and Nitrite dropping to 0 to confirm your cycle is finished."
    },
    "e_cycle_nothing_happening": {
      "type": "expected_behaviour",
      "text_template": "Visually, the tank looks boring and nothing seems to be happening. Trust the chemistry. The most important growth is invisible to the naked eye."
    },
    "e_hardscape_expected": {
      "type": "expected_behaviour",
      "text_template": "{{variant}}",
      "text_variants": {
        "wood": "Tea-colored water from tannins and white fuzzy fungus on driftwood are both normal early on. They are harmless and fade over time.",
        "mixed": [
          "Tea-colored water from tannins and white fuzzy fungus on driftwood are both normal early on. They are harmless and fade over time.",
          "Light dust from stone can cause some early cloudiness. It clears with time."
        ],
        "stone": "Light dust from stone can cause some early cloudiness. It clears with time."
      },
      "args_schema": {
        "type": [
          "wood",
          "mixed",
          "stone"
        ]
      }
    },
    "e_stock_expected": {
      "type": "expected_behaviour",
      "text_template": "{{variant}}",
      "text_variants": {
        "fish": [
          "New fish often hide, go pale, glass-surf, or huddle tightly for a day or two. That's normal settling-in behavior; give them time and keep the lights calm.",
          "Corys/loaches may dash to the surface and back. That's normal behavior, not a sign of suffocation."
        ],
        "shrimp": [
          "New shrimp may hide, look pale, or 'play dead' for a few minutes after release. That's normal shock; they usually perk up once settled.",
          "Panic check: You might see a white, transparent ghost of a shrimp on the bottom. This is a molt (exoskeleton), not a dead shrimp. Leave it in the tank; they will eat it for calcium.",
          "Shrimp may do quick 'zoomies.' That's usually normal. If all shrimp are racing near the surface, check your CO2."
        ],
        "both": [
          "New fish often hide, go pale, glass-surf, or huddle tightly for a day or two. That's normal settling-in behavior; give them time and keep the lights calm.",
          "Corys/loaches may dash to the surface and back. That's normal behavior, not a sign of suffocation.",
          "New shrimp may hide, look pale, or 'play dead' for a few minutes after release. That's normal shock; they usually perk up once settled.",
          "Panic check: You might see a white, transparent ghost of a shrimp on the bottom. This is a molt (exoskeleton), not a dead shrimp. Leave it in the tank; they will eat it for calcium.",
          "Shrimp may do quick 'zoomies.' That's usually normal. If all shrimp are racing near the surface, check your CO2."
        ]
      },
      "args_schema": {
        "stock": [
          "fish",
          "shrimp",
          "both"
        ]
      }
    },
    "i_cycle_ph_crash_warning": {
      "type": "instruction",
      "text_template": "Cycle stall warning: The cycling process produces acid. If pH drops below 6.5, the bacteria will 'fall asleep' and the cycle will stall. If it's low, perform a 50% water change to restore minerals."
    },
    "i_cycle_check_algae": {
      "type": "instruction",
      "text_template": "Look for Brown Dust (Diatoms) or Green fuzz. Since we have lights ON, algae is the enemy. If you see it, manual removal (toothbrush/siphon) is mandatory immediately. Do not let it settle."
    },
    "i_cycle_fishin_aquasoil_danger": {
      "type": "instruction",
      "text_template": "WARNING: You are using Aquasoil with fish. Fresh Aquasoil releases a lot of ammonia. You MUST perform a **50% water change every day** for the first week to keep your fish safe."
    },
    "i_fert_increase_if_pale_leaves": {
      "type": "instruction",
      "text_template": "If you see pale leaves or pinholes, increase your fertilizer dose."
    },
    "i_fert_increase_to_full": {
      "type": "instruction",
      "text_template": "You started on a reduced dose. Now increase to a full fertilizer dose."
    },
    "i_fert_start_dose": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "half": "Begin dosing your liquid fertilizer, but only use a Half Dose for now. Your plants are waking up, and full dosing combined with the ammonia you are adding can trigger algae. We'll increase to full strength after the cycle.",
        "full": "Begin dosing your liquid fertilizer at a Full Dose. Your plants are ready for it, and we'll monitor for algae as the tank settles."
      },
      "args_schema": {
        "dose": [
          "half",
          "full"
        ]
      }
    },
    "t_fert_dose": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "{{variant}}",
      "text_variants": {
        "half": "Dose {{doses.fertilizer_micros.fertilizer_micros_ml_week_half}} mL of {{products.fertilizer_micros.display_name}} (Half Dose).",
        "full": "Dose {{doses.fertilizer_micros.fertilizer_micros_ml_week_full}} mL of {{products.fertilizer_micros.display_name}} (adjust based on plant growth)."
      },
      "args_schema": {
        "cadence": [
          "one_time",
          "weekly"
        ],
        "dose": [
          "half",
          "full"
        ]
      }
    },
    "i_hard_composition_tips": {
      "type": "instruction",
      "text_template": "Hardscape tip: use odd numbers and a strong focal point (rule of thirds). Keep the front open for depth."
    },
    "i_hard_prep": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "stone": "Rinse your stones to remove loose dust before placing them.",
        "wood": "Soak your driftwood, glue it to rocks, or weigh it down. Dry wood floats!",
        "mixed": "Rinse your stones to remove loose dust before placing them. Soak your driftwood, glue it to rocks, or weigh it down. Dry wood floats!"
      },
      "args_schema": {
        "type": [
          "stone",
          "wood",
          "mixed"
        ]
      }
    },
    "t_hard_finalize_layout": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Finalize your hardscape layout. Make sure it is stable and won't shift during planting."
    },
    "t_sub_place_slope": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Pour and slope the substrate (higher in the back, lower in the front) to create depth."
    },
    "t_sub_prep": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "{{variant}}",
      "text_variants": {
        "inert": "Rinse your sand/gravel in a bucket until the water runs clear. This prevents permanent cloudiness.",
        "aquasoil": "Handle your Aquasoil gently. Do NOT rinse it. Rinsing active soil breaks down the nutrient pellets and turns your tank into a mud bath."
      },
      "args_schema": {
        "substrate": [
          "inert",
          "aquasoil"
        ]
      }
    },
    "i_intro_duration": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "1": "This phase is short and focused. Plan for about 1 day.",
        "3": "This phase is short and focused. Plan for about 3 days.",
        "7": "Plan for about 7 days for this phase.",
        "14": "Plan for about 14 days for this phase.",
        "28": "Plan for about 28 days for this phase.",
        "indefinite": "This phase has no fixed end date. Continue until you choose to move on."
      },
      "args_schema": {
        "days": [
          "1",
          "3",
          "7",
          "14",
          "28",
          "indefinite"
        ]
      }
    },
    "i_intro_fishin_I1_setup": {
      "type": "instruction",
      "text_template": "You are performing a **Fish-In Cycle**. This requires extreme diligence. You are building the home while the residents are living in it. Your primary goal is **Safety**, not growth."
    },
    "i_intro_fishin_I2_stabilization": {
      "type": "instruction",
      "text_template": "Your primary job right now is to keep toxins low. If Ammonia or Nitrite rises above 0.5ppm, the fish are suffering and need your help immediately."
    },
    "i_intro_fishin_I3_biofilter": {
      "type": "instruction",
      "text_template": "If you are seeing consistent 0 ppm Ammonia readings, your first bacteria colony is working! Now watch for the 'Nitrite Spike'."
    },
    "i_intro_fishin_I4_transition": {
      "type": "instruction",
      "text_template": "Your ecosystem is established! Tests are stable and the water is clean. We can now optimize the tank for maximum growth."
    },
    "i_intro_fishless_DS1_setup": {
      "type": "instruction",
      "text_template": "You are doing a 'Dark Start'. By keeping lights OFF and plants OUT, we prevent algae while the filter matures. It requires patience but guarantees a cleaner start."
    },
    "i_intro_fishless_DS2_ammonia": {
      "type": "instruction",
      "text_template": "We are now maintaining the ammonia levels while waiting for the bacteria to catch up. Keep the tank dark."
    },
    "i_intro_fishless_DS3_nitrite": {
      "type": "instruction",
      "text_template": "The cycle seems finished. Let's verify before we unmask the tank. We need to be 100% sure the filter can handle the bioload."
    },
    "i_intro_fishless_DS4_completion": {
      "type": "instruction",
      "text_template": "The cycle looks complete, but we will run a final confirmation test while keeping the tank dark."
    },
    "i_intro_fishless_DS5_exit": {
      "type": "instruction",
      "text_template": "Congratulations! Your tank is cycled and ready for the next step."
    },
    "i_intro_fishless_F1_setup": {
      "type": "instruction",
      "text_template": "You are performing a traditional Fishless Cycle. You will dose ammonia to build the filter, but with lights (and plants) running."
    },
    "i_intro_fishless_F2_ammonia": {
      "type": "instruction",
      "text_template": "We are now maintaining the ammonia levels while waiting for the bacteria to catch up. **Continue your daily lighting schedule.**"
    },
    "i_intro_fishless_F3_nitrite": {
      "type": "instruction",
      "text_template": "Nitrite is now taking over. This phase is often the longest part of the cycle. Stay consistent and keep dosing ammonia as directed until Nitrite starts to fall."
    },
    "i_intro_fishless_F4_completion": {
      "type": "instruction",
      "text_template": "The cycle seems finished. Let's verify before moving forward. We need to be 100% sure the filter can handle the bioload."
    },
    "i_intro_fishless_F5_transition": {
      "type": "instruction",
      "text_template": "Your Fishless Cycle is complete! The bacteria can process ammonia and nitrite instantly. It is time to make the tank safe for fish."
    },
    "i_intro_routine_R1_forever": {
      "type": "instruction",
      "text_template": "Welcome to the 'Forever' phase. Consistency is key. Regular maintenance prevents 'Old Tank Syndrome' and keeps algae away."
    },
    "i_intro_silent_PA1_fert_aquasoil_delay": {
      "type": "instruction",
      "text_template": "Plants are hungry, but if you are using Aquasoil, **do NOT dose liquid fertilizer for the first 2 weeks**. The soil leaches excess nutrients already."
    },
    "i_intro_silent_PA1_fert_inert_start": {
      "type": "instruction",
      "text_template": "You are using inert substrate, so start liquid fertilizer dosing immediately."
    },
    "i_intro_silent_PA1_setup": {
      "type": "instruction",
      "text_template": "We are using 'Silent Cycling'. By planting heavily from Day 1, the plants will consume the ammonia directly."
    },
    "i_intro_silent_PA2_growth_watch": {
      "type": "instruction",
      "text_template": "The goal of a Silent Cycle is... silence. If the plants are healthy, you should see 0 Ammonia and 0 Nitrite continuously."
    },
    "i_intro_silent_PA3_stocking": {
      "type": "instruction",
      "text_template": "If your tests show 0 ppm Ammonia and Nitrite, and your plants are showing new growth, the tank is ready for the first inhabitants."
    },
    "i_intro_silent_PA4_transition": {
      "type": "instruction",
      "text_template": "Your ecosystem is established! Tests are stable and the water is clean. We can now optimize the tank for maximum growth."
    },
    "i_light_dark_rule": {
      "type": "instruction",
      "text_template": "Verify that all light sources are disabled. Light is the enemy of the Dark Start."
    },
    "t_light_confirm_off": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Confirm: Lights Unplugged/OFF."
    },
    "i_light_ramp_plan": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "basic:any": "Start with **6 hours**. Increase duration by **30 minutes per week**. If algae appears, pause the ramp.",
        "dedicated:any": "Start at **6 hours** at **60%** intensity. Ramp intensity first (~10% per week), then increase duration. If algae appears, pause the ramp.",
        "high_performance:low": "Start at **6 hours** at **30%** intensity. Ramp intensity first (~10% per week) to **60%**, then increase duration. If algae appears, pause the ramp.",
        "high_performance:high": "Start at **6 hours** at **50%** intensity. Ramp intensity first (~10% per week) to **100%**, then increase duration. If algae appears, pause the ramp."
      },
      "args_schema": {
        "light_type": [
          "basic",
          "dedicated",
          "high_performance"
        ],
        "plant_demand": [
          "low",
          "high",
          "any"
        ]
      }
    },
    "t_light_start": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "{{variant}}",
      "text_variants": {
        "basic:any": "Start light at 6 hours.",
        "dedicated:any": "Start light at 60% intensity for 6 hours.",
        "high_performance:low": "Start light at 30% intensity for 6 hours.",
        "high_performance:high": "Start light at 50% intensity for 6 hours."
      },
      "args_schema": {
        "light_type": [
          "basic",
          "dedicated",
          "high_performance"
        ],
        "plant_demand": [
          "low",
          "high",
          "any"
        ]
      }
    },
    "t_light_ramp_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "{{variant}}",
      "text_variants": {
        "basic:any": "Add 30 minutes to your photoperiod.",
        "dedicated:any": "Increase light intensity by 10% per week first. After that, add 30 minutes of duration.",
        "high_performance:low": "Increase light intensity toward 60% first, then add 30 minutes of duration.",
        "high_performance:high": "Increase light intensity toward 100% first, then add 30 minutes of duration."
      },
      "args_schema": {
        "light_type": [
          "basic",
          "dedicated",
          "high_performance"
        ],
        "plant_demand": [
          "low",
          "high",
          "any"
        ]
      }
    },
    "t_equip_filter_turn_on": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on the filter and confirm steady flow. Prime first if using canister filter."
    },
    "i_equip_filter_on": {
      "type": "instruction",
      "text_template": "Run the filter 24/7. Oxygen is vital for the bacteria."
    },
    "t_equip_heater_set_target": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Set heater to {{targets.temperature_target_c}}°C."
    },
    "t_equip_heater_on": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on heater (aim for 28°C for maximal bacterial growth)."
    },
    "i_equip_heater_target_reset": {
      "type": "instruction",
      "text_template": "Reset your heater to your target temperature ({{targets.temperature_target_c}}°C). We no longer need the elevated incubation temperature."
    },
    "i_maint_filter_do_not_clean_early": {
      "type": "instruction",
      "text_template": "Do NOT clean your filter yet. The brown sludge building up inside is the bacterial colony we are trying to grow."
    },
    "i_maint_long_haul_nitrate_report_card": {
      "type": "instruction",
      "text_template": "**Test Before You Clean**. Always measure Nitrates before performing your water change and before dosing fertilizer. This reading is your 'Report Card' for the previous week.**> 40 ppm**: The tank is dirty. Perform a larger (50%) water change today.**< 5 ppm**: Your plants may starve. Feed slightly more or reduce water change volume. **10-20 ppm**: Perfect. Your routine is working."
    },
    "i_maint_wc_inert_emergency": {
      "type": "instruction",
      "text_template": "Emergency Water Change: Only change water if Ammonia > 1.0ppm."
    },
    "i_maint_wc_nitrite_rule": {
      "type": "instruction",
      "text_template": "Rule: If Ammonia or Nitrite is above 0.5 ppm, perform a 50% water change immediately."
    },
    "i_maint_wc_reset": {
      "type": "instruction",
      "text_template": "Perform a massive **70–80% Water Change**. \n\n**Why?** Your Nitrate levels are likely very high from the cycling process. We need to 'reset' the water to safe levels (Nitrate < 30ppm) before the fish arrive."
    },
    "t_maint_filter_clean_monthly": {
      "type": "task",
      "cadence": "monthly",
      "text_template": "Rinse filter sponges in old tank water. Never use tap water."
    },
    "t_maint_prep": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "{{variant}}",
      "text_variants": {
        "conditioner": "Add {{doses.detoxifier_conditioner.wc_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}} to the bucket.",
        "conditioner_generic": "Add a water conditioner to treat the bucket volume.",
        "gh": "Dissolve {{doses.gh_remineralizer.gh_remineralizer_g_wc_range}} {{products.gh_remineralizer.dose_unit}} of {{products.gh_remineralizer.display_name}} in the bucket.",
        "ghkh": "Dissolve {{doses.gh_kh_remineralizer.wc_dose_amount}} {{products.gh_kh_remineralizer.dose_unit}} of {{products.gh_kh_remineralizer.display_name}} in the bucket.",
        "kh": "Dissolve {{doses.kh_buffer.kh_buffer_g_wc_range}} {{products.kh_buffer.dose_unit}} of {{products.kh_buffer.display_name}} in the bucket."
      },
      "args_schema": {
        "type": [
          "conditioner",
          "gh",
          "ghkh",
          "kh"
        ]
      }
    },
    "t_maint_trim_melting_plants": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Trim and remove any melting leaves/stems."
    },
    "t_maint_wc_aquasoil_frequent": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Perform a 30-50% water change. Remove excess ammonia leaching from the new soil to prevent algae."
    },
    "t_maint_wc_nitrite_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Conditional: If Nitrite is > 0.5 ppm, perform a 50% water change immediately."
    },
    "t_maint_drain_tank": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Drain the tank almost down to the substrate."
    },
    "t_maint_wc_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Perform a {{derived.weekly_water_change_percent_range}}% water change."
    },
    "t_maint_wc_daily_50": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Perform a 50% water change."
    },
    "i_plant_dense": {
      "type": "instruction",
      "text_template": "Plant as densely as possible. The more plant mass you have, the safer your tank will be."
    },
    "t_plant_epiphytes": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Plant your Epiphytes on hardscape. Glue or tie them; never bury the rhizome."
    },
    "t_plant_stems": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Plant your Stems."
    },
    "t_plant_root_tabs": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Insert root tabs deep into the substrate beneath your heavy root feeders."
    },
    "i_plant_epiphytes": {
      "type": "instruction",
      "text_template": "Planting Epiphytes (Anubias/Buce): Glue or tie them to hardscape. If you bury the rhizome in the substrate, they will rot."
    },
    "i_plant_stems": {
      "type": "instruction",
      "text_template": "Planting Stems: Trim the bottom inch off and remove lower leaves. Plant in small bunches to encourage new root growth."
    },
    "i_plants_prep": {
      "type": "instruction",
      "text_template": [
        "Remove pots and rock wool from plants, then gently rinse the roots.",
        "Keep a spray bottle handy and mist plants during setup so they don't dry out."
      ]
    },
    "i_stock_add_in_batches_weekly": {
      "type": "instruction",
      "text_template": "Add fish in small batches (e.g., 6–8 at a time) and wait one week between groups. Adding everyone at once creates a massive ammonia spike that your filter cannot process instantly. Gradual stocking keeps your water safe."
    },
    "i_stock_shrimp_wait_warning": {
      "type": "instruction",
      "text_template": "Planning to add shrimp? **Wait 2–4 weeks.** They need a mature tank with biofilm and algae to graze. Adding them too early is risky."
    },
    "t_stock_feed_every_other_day": {
      "type": "task",
      "cadence": "interval",
      "every_days": 2,
      "text_template": "Feed a tiny pinch per fish (every other day)."
    },
    "i_stock_fishin_wait_before_adding": {
      "type": "instruction",
      "text_template": "After you've prepared your tank, it's wise to wait a couple of days before adding stock. It takes time to get everything running, and it's better to add fish to a working tank with stable temperature and flow."
    },
    "i_stock_fish_gasping_emergency": {
      "type": "instruction",
      "text_template": "Safety Check: Are your fish hanging near the surface or gasping? This is **Nitrite Poisoning** (suffocation), not hunger. If you see this, perform an immediate water change."
    },
    "i_stock_cleanup_crew_start_light": {
      "type": "instruction",
      "text_template": "We start with a 'Cleaning Crew' (Snails/Shrimp/Oto). Stock light!"
    },
    "i_stock_acclimation": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "fish": "To acclimate fish, turn off the light and float the sealed bag for 15 minutes to equalize temperature. Then, open the bag (or move fish to a bucket) and add a small cup of tank water every 5 minutes for 20 minutes. Finally, **net the fish out** into the tank. Never pour the store water into your aquarium.",
        "shrimp": "Shrimp require **drip acclimation**. Place them in a container below the tank. Siphon tank water down using airline tubing, tying a knot in the tube to restrict flow to 1-2 drops per second. Let this run for 45-60 minutes (until the water volume triples) before netting them in."
      },
      "args_schema": {
        "type": [
          "fish",
          "shrimp"
        ]
      }
    },
    "t_stock_acclimate": {
      "type": "task",
      "cadence": "per_event",
      "text_template": "{{variant}}",
      "text_variants": {
        "fish": "Acclimate fish before adding to tank.",
        "shrimp": "Drip acclimate shrimp before adding them to tank."
      },
      "args_schema": {
        "type": [
          "fish",
          "shrimp"
        ],
        "due_offset_days": [
          3
        ]
      }
    },
    "i_stock_feed_guidance": {
      "type": "instruction",
      "text_template": "{{variant}}",
      "text_variants": {
        "routine": "Feed lightly — **every other day**. New fish will beg whenever they see you; ignore them. One tiny pinch per fish. If food hits the bottom, you fed too much.",
        "long_haul": "Feeding Rule: **Every Other Day.** \n\n**Is this permanent?** \nYes! Adult community fish thrive on this schedule. It prevents obesity and keeps your water crystal clear. \n\n**Exceptions:** \nIf you have **Baby Fish** or **Nano species** (like Pea Puffers), you must feed daily. For everyone else, skip the guilt and skip the day."
      },
      "args_schema": {
        "phase": [
          "routine",
          "long_haul"
        ]
      }
    },
    "i_stock_detox": {
      "type": "instruction",
      "text_template": "Safety tip: Use a conditioner that detoxifies ammonia/nitrite. It acts like an emergency brake for up to 24 hours while you fix the root cause."
    },
    "t_stock_detox": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Add {{doses.detoxifier_conditioner.emergency_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}} (binds ammonia/nitrite)."
    },
    "i_stock_ds_timing": {
      "type": "instruction",
      "text_template": "Your filter is cycled and ready.**Do not buy your fish yet.** Drain, plant, and refill the tank *first*. Once the equipment is running and the temperature is stable, *then* go to the store. Fish sitting in a bag while you plant stems for hours is a recipe for disaster."
    },
    "i_water_chlorine_treat_full_volume": {
      "type": "instruction",
      "text_template": "Since you have chlorine/chloramine, we must treat the full tank volume. If using a hose, add the conditioner to the tank *before* filling."
    },
    "i_water_drain_90_intro": {
      "type": "instruction",
      "text_template": "Drain the tank down to about 90% to remove built-up waste before planting.",
      "conditions": []
    },
    "i_water_fill_prep_bag_or_plate": {
      "type": "instruction",
      "text_template": "Time to fill! Place a plastic bag or plate on the substrate and pour water onto **that** to prevent clouding."
    },
    "t_water_fill_dose": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "{{variant}}",
      "text_variants": {
        "conditioner": "Add {{doses.detoxifier_conditioner.fullfill_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}} to the tank or bucket before filling.",
        "conditioner_generic": "Add a water conditioner to the tank or bucket to treat the full tank volume before filling.",
        "gh": "Dissolve {{doses.gh_remineralizer.fullfill_dose_amount}} {{products.gh_remineralizer.dose_unit}} of {{products.gh_remineralizer.display_name}} in bucket before filling.",
        "ghkh": "Dissolve {{doses.gh_kh_remineralizer.fullfill_dose_amount}} {{products.gh_kh_remineralizer.dose_unit}} of {{products.gh_kh_remineralizer.display_name}} in bucket before filling.",
        "kh": "Dissolve {{doses.kh_buffer.fullfill_dose_amount}} {{products.kh_buffer.dose_unit}} of {{products.kh_buffer.display_name}} in bucket before filling."
      },
      "args_schema": {
        "type": [
          "conditioner",
          "gh",
          "ghkh",
          "kh"
        ]
      }
    },
    "t_water_drain_90": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Drain the tank almost fully (90%) to remove accumulated Nitrates.",
      "conditions": []
    },
    "t_water_fill_tank": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Fill the tank with water.",
      "conditions": []
    },
    "t_water_top_off_interval": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Top off evaporated water with freshwater.",
      "conditions": []
    }
  }
}
