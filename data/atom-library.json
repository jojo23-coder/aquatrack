{
  "atom_library": {
    "i_co2_adjust_safe_before_stocking": {
      "type": "instruction",
      "text_template": "IMPORTANT: Dial back your CO2 injection. We need the drop checker to read a solid **Lime Green** (not yellow) before the fish arrive to ensure they have enough oxygen.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_lime_green_check_before_stocking": {
      "type": "instruction",
      "text_template": "CO2 safety check before stocking: ensure the drop checker is **Lime Green**, not Yellow. If it is Yellow, dial it back and wait 2 hours before adding fish.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_monitor_stability": {
      "type": "instruction",
      "text_template": "Stability is key. Your CO2 is already optimized (Lime Green). Monitor fish for gasping; if they are fine, do not change the settings.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_start_high_saturation_fishless": {
      "type": "instruction",
      "text_template": "Since you are fishless, **Turn CO2 ON immediately**. Aim for a **Lime Green** or even **Yellow-Green** drop checker. This supercharges growth and prevents your new plants from melting.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_strategy_off_during_cycle": {
      "type": "instruction",
      "text_template": "Strategy: **Keep CO2 OFF.** \n\nEven if you have a CO2 system, leave it off during the cycle. \n\n**Why?** The coming Nitrite spike makes it hard for fish to absorb oxygen. CO2 further reduces oxygen levels. Combining the two is often fatal. We will turn CO2 on only after the water is safe.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_target_dark_green_safe": {
      "type": "instruction",
      "text_template": "Start CO2 (1 bubble / 3 secs). Check drop checker after 2-3 hours. Aim for **Dark Green** (Safe).",
      "conditions": [
        "setup.co2_enabled == true",
        "!modifiers.includes('co2:wait')",
        "!modifiers.includes('co2:cautious')"
      ]
    },
    "i_co2_target_yellow_green_growth": {
      "type": "instruction",
      "text_template": "Since there are no fish, you can run CO2 slightly higher than normal (Yellow-Green color on the drop checker). This maximizes plant growth and suppresses algae during the ammonia spikes.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_co2_timer_on_off": {
      "type": "instruction",
      "text_template": "Set CO2 timer: ON 1 hour before lights and OFF 1 hour before lights out.",
      "conditions": [
        "setup.co2_enabled == true",
        "!modifiers.includes('co2:wait')"
      ]
    },
    "i_co2_wait_for_fish": {
      "type": "instruction",
      "text_template": "Keep CO2 OFF initially. Your fish are already stressed by the move; adding CO2 now adds suffocation risk.",
      "conditions": [
        "setup.co2_enabled == true",
        "modifiers.includes('co2:wait')"
      ]
    },
    "t_co2_adjust_safe": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Dial back CO2 to a solid Lime Green on the drop checker.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "t_co2_confirm_off": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Confirm: CO2 Unplugged/OFF.",
      "conditions": [
        "setup.co2_enabled == true",
        "modifiers.includes('co2:wait')"
      ]
    },
    "t_co2_maintenance_monthly": {
      "type": "task",
      "cadence": "monthly",
      "text_template": "CO2 Maintenance: Change drop checker fluid and clean diffuser.",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "t_co2_turn_on": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on CO2 system.",
      "conditions": [
        "setup.co2_enabled == true",
        "!modifiers.includes('co2:wait')"
      ]
    },
    "t_co2_turn_on_initial_setup": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on CO2 system. Set bubble rate to approx 1 bubble per second (adjust for tank size).",
      "conditions": [
        "setup.co2_enabled == true"
      ]
    },
    "i_cycle_nitrite_spike_warning": {
      "type": "instruction",
      "text_template": "Nitrite is now spiking. This is the longest part of the cycle. Do NOT add livestock yet."
    },
    "i_cycle_ammonia_aquasoil_caution": {
      "type": "instruction",
      "text_template": "Your Aquasoil is likely releasing high amounts of ammonia already. We must test before dosing to avoid overdosing the tank.",
      "conditions": [
        "setup.substrate_type == 'aquasoil'"
      ]
    },
    "i_cycle_ammonia_dose_inert": {
      "type": "instruction",
      "text_template": "Inert substrate requires manual ammonia dosing to start the cycle.",
      "conditions": [
        "setup.substrate_type == 'inert'",
        "products.ammonia_source.selected == true"
      ]
    },
    "i_cycle_nitrite_clear_goal": {
      "type": "instruction",
      "text_template": "The Goal: We are waiting for the day when you test and see 0 ppm Ammonia AND 0 ppm Nitrite. When that happens, your bacteria are ready for the final 24-hour challenge."
    },
    "i_cycle_algae_light_warning": {
      "type": "instruction",
      "text_template": "Warning: High Ammonia combined with strong light often triggers algae. If you don't have many plants yet, keep your lighting duration short (6 hours max).",
      "conditions": []
    },
    "t_cycle_ammonia_dose_when_zero": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Only if Ammonia is 0 ppm: Add {{doses.ammonia_source.ammonia_ml_range}} mL of {{products.ammonia_source.display_name}}.",
      "conditions": [
        "products.ammonia_source.selected == true"
      ]
    },
    "t_cycle_ammonia_dose_initial": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Add {{doses.ammonia_source.ammonia_ml_range}} mL of {{products.ammonia_source.display_name}}.",
      "conditions": [
        "products.ammonia_source.selected == true"
      ]
    },
    "t_cycle_bacteria_dose_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Add {{products.bacteria_starter.dose_text}} of {{products.bacteria_starter.display_name}}.",
      "conditions": [
        "products.bacteria_starter.selected == true"
      ]
    },
    "t_cycle_bacteria_dose_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Add {{products.bacteria_starter.display_name}} (Check label for 'New Tank' dose).",
      "conditions": [
        "products.bacteria_starter.selected == true"
      ]
    },
    "i_equip_filter_on": {
      "type": "instruction",
      "text_template": "Run the filter 24/7. Oxygen is vital for the bacteria."
    },
    "i_equip_heater_target_reset": {
      "type": "instruction",
      "text_template": "Reset your heater to your target temperature ({{targets.temperature_target_c}}°C). We no longer need the elevated incubation temperature.",
      "conditions": [
        "setup.heater_installed == true"
      ]
    },
    "t_equip_heater_on": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Turn on heater (aim for 24-26°C).",
      "conditions": [
        "setup.heater_installed == true"
      ]
    },
    "t_equip_heater_set_target": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Set heater to {{targets.temperature_target_c}}°C.",
      "conditions": [
        "setup.heater_installed == true"
      ]
    },
    "e_cycle_diatoms_brown_algae": {
      "type": "expected_behaviour",
      "text_template": "Expect brown algae (diatoms) as a dusty coating on glass, plants, and hardscape. It's the classic ugly phase and a normal sign your cycle is maturing. Don't deep clean it; it fades on its own.",
      "conditions": []
    },
    "e_water_cloudy_bloom": {
      "type": "expected_behaviour",
      "text_template": "Cloudy or milky water is normal early on. It can be substrate dust, microbubbles, or a bacterial bloom. Unless we say otherwise, don't chase it with big water changes.",
      "conditions": []
    },
    "e_hard_tannins_fungus": {
      "type": "expected_behaviour",
      "text_template": "Tea-colored water from tannins and white fuzzy fungus on driftwood are both normal early on. They are harmless and fade over time.",
      "conditions": [
        "setup.hardscape_type == 'wood' || setup.hardscape_type == 'mixed'"
      ]
    },
    "e_stock_new_fish_stress": {
      "type": "expected_behaviour",
      "text_template": "New fish often hide, go pale, glass-surf, or huddle tightly for a day or two. That's normal settling-in behavior; give them time and keep the lights calm.",
      "conditions": [
        "livestock.has_fish == true || livestock.has_schooling == true"
      ]
    },
    "e_stock_new_shrimp_stress": {
      "type": "expected_behaviour",
      "text_template": "New shrimp may hide, look pale, or 'play dead' for a few minutes after release. That's normal shock; they usually perk up once settled.",
      "conditions": [
        "livestock.has_shrimp == true"
      ]
    },
    "e_stock_sudden_darting": {
      "type": "expected_behaviour",
      "text_template": "Corys/loaches may dash to the surface and back, and shrimp may do quick 'zoomies.' That's usually normal. If all shrimp are racing near the surface, check your CO2.",
      "conditions": [
        "livestock.has_bottom_dwellers == true || livestock.has_shrimp == true"
      ]
    },
    "e_water_surface_scum": {
      "type": "expected_behaviour",
      "text_template": "You might see an oily film or foam on the water surface. This is protein biofilm. It is harmless and will be removed when we install the skimmer or do water changes later."
    },
    "e_cycle_ammonia_drop_speed": {
      "type": "expected_behaviour",
      "text_template": "Initially, ammonia will drop very slowly. As the colony grows, you will notice it dropping faster, requiring more frequent redosing. This acceleration is the goal."
    },
    "e_bio_slimy_walls": {
      "type": "expected_behaviour",
      "text_template": "The glass and heater might feel slimy to the touch. This is the bacteria colonizing surfaces. Do not scrub it off yet."
    },
    "e_cycle_nothing_happening": {
      "type": "expected_behaviour",
      "text_template": "Visually, the tank looks boring and nothing seems to be happening. Trust the chemistry. The most important growth is invisible to the naked eye."
    },
    "e_plant_transition": {
      "type": "expected_behaviour",
      "text_template": "You may see some plants melting or losing leaves while others grow new roots. This transition is normal as they adapt to your water. Trim melting leaves so they don't rot."
    },
    "e_cycle_purple_nitrite": {
      "type": "expected_behaviour",
      "text_template": "Your Nitrite test will likely turn bright purple immediately and stay off the charts for weeks. This is not a stall; it is just a very high peak. Keep going."
    },
    "e_cycle_ammonia_hunger": {
      "type": "expected_behaviour",
      "text_template": "Your Ammonia will now drop to 0 ppm very quickly (often within 24 hours). This is great. The first half of your filter is complete. You must keep feeding it while waiting for the Nitrite to drop."
    },
    "e_cycle_ph_crash_warning": {
      "type": "expected_behaviour",
      "text_template": "Cycle stall warning: If your pH drops below 6.0, the bacteria will stop working. If this happens, perform a 50% water change to restore minerals (KH) and restart the process."
    },
    "e_bio_detritus_buildup": {
      "type": "expected_behaviour",
      "text_template": "You may see brown fluff or debris settling on the bottom. This is dead bacterial biomass and is a normal byproduct of a heavy cycle. We will vacuum it out later."
    },
    "e_stock_shrimp_molt": {
      "type": "expected_behaviour",
      "text_template": "Panic check: You might see a white, transparent ghost of a shrimp on the bottom. This is a molt (exoskeleton), not a dead shrimp. Leave it in the tank; they will eat it for calcium.",
      "conditions": [
        "livestock.has_shrimp == true"
      ]
    },
    "e_plant_melt_high_ammonia": {
      "type": "expected_behaviour",
      "text_template": "Note: High ammonia (>2ppm) can sometimes melt delicate plant tissues. Monitor them closely and do a small water change if melting is severe.",
      "conditions": [
        "setup.plants_present_in_plan == true"
      ]
    },
    "i_fert_increase_if_pale_leaves": {
      "type": "instruction",
      "text_template": "If you see pale leaves or pinholes, increase your fertilizer dose.",
      "conditions": [
        "products.fertilizer_micros.selected == true",
        "setup.plants_present_in_plan == true"
      ]
    },
    "i_fert_start_half_dose_weekly": {
      "type": "instruction",
      "text_template": "Begin dosing your liquid fertilizer, but only use a **Half Dose** for now. \n\n**Why?** Your plants are waking up, but full dosing combined with the ammonia you are adding can trigger algae. We will increase to full strength after the cycle.",
      "conditions": [
        "products.fertilizer_micros.selected == true",
        "setup.plants_present_in_plan == true"
      ]
    },
    "t_fert_dose_full_weekly_transition": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Increase to **Full Fertilizer Dose**. {{doses.fertilizer_micros.fertilizer_micros_ml_week_start}} mL of {{products.fertilizer_micros.display_name}}.",
      "conditions": [
        "products.fertilizer_micros.selected == true",
        "setup.plants_present_in_plan == true"
      ]
    },
    "t_fert_dose_half_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Add {{doses.fertilizer_micros.fertilizer_micros_ml_week_start}} mL of {{products.fertilizer_micros.display_name}} (**Half Dose**).",
      "conditions": [
        "products.fertilizer_micros.selected == true"
      ]
    },
    "t_fert_dose_half_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Dose {{doses.fertilizer_micros.fertilizer_micros_ml_week_start}} mL of {{products.fertilizer_micros.display_name}} (**Half Dose**).",
      "conditions": [
        "products.fertilizer_micros.selected == true",
        "setup.plants_present_in_plan == true"
      ]
    },
    "t_fert_dose_maintenance_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Dose {{doses.fertilizer_micros.fertilizer_micros_ml_week_start}} mL of {{products.fertilizer_micros.display_name}} (adjust based on plant growth).",
      "conditions": [
        "products.fertilizer_micros.selected == true",
        "setup.plants_present_in_plan == true"
      ]
    },
    "i_hard_composition_tips": {
      "type": "instruction",
      "text_template": "Hardscape tip: use odd numbers and a strong focal point (rule of thirds). Keep the front open for depth.",
      "conditions": []
    },
    "i_hard_rinse_stones": {
      "type": "instruction",
      "text_template": "Rinse your stones to remove loose dust before placing them.",
      "conditions": [
        "setup.hardscape_type == 'stone' || setup.hardscape_type == 'mixed'"
      ]
    },
    "i_hard_soak_driftwood": {
      "type": "instruction",
      "text_template": "Soak your driftwood, glue it to rocks, or weigh it down. Dry wood floats!",
      "conditions": [
        "setup.hardscape_type == 'wood' || setup.hardscape_type == 'mixed'"
      ]
    },
    "i_sub_no_rinse_aquasoil": {
      "type": "instruction",
      "text_template": "Handle your Aquasoil gently. Do NOT rinse it. Rinsing active soil breaks down the nutrient pellets and turns your tank into a mud bath.",
      "conditions": [
        "setup.substrate_type == 'aquasoil'"
      ]
    },
    "t_hard_finalize_layout": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Finalize your hardscape layout. Make sure it is stable and won't shift during planting.",
      "conditions": []
    },
    "t_sub_place_slope": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Pour and slope the substrate (higher in the back, lower in the front) to create depth.",
      "conditions": []
    },
    "t_sub_rinse_inert": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Rinse your sand/gravel in a bucket until the water runs clear. This prevents permanent cloudiness.",
      "conditions": [
        "setup.substrate_type == 'inert'"
      ]
    },
    "i_intro_fishin_light_nitrite_watch": {
      "type": "instruction",
      "text_template": "If you are seeing consistent 0 ppm Ammonia readings, your first bacteria colony is working! Now watch for the 'Nitrite Spike'."
    },
    "i_intro_fishin_light_setup": {
      "type": "instruction",
      "text_template": "You are cycling with fish ('Fish-in'). This requires daily attention. You are the safety net for your fish until the bacteria grow."
    },
    "i_intro_fishin_light_setup_low": {
      "type": "instruction",
      "text_template": "You are cycling with fish ('Fish-in') using a 'Minimal Light' start. This reduces stress on the fish and prevents algae during the unstable early weeks."
    },
    "i_intro_fishin_light_toxin_watch": {
      "type": "instruction",
      "text_template": "Your primary job right now is to keep toxins low. If Ammonia or Nitrite rises above 0.5ppm, the fish are suffering and need your help immediately."
    },
    "i_intro_fishless_dark_ammonia_maintenance": {
      "type": "instruction",
      "text_template": "We are now maintaining the ammonia levels while waiting for the bacteria to catch up. Keep the tank dark."
    },
    "i_intro_fishless_dark_cycle_complete": {
      "type": "instruction",
      "text_template": "Congratulations! Your tank is cycled and ready for the next step.",
      "conditions": []
    },
    "i_intro_fishless_dark_cycle_verification": {
      "type": "instruction",
      "text_template": "The cycle seems finished. Let's verify before we unmask the tank. We need to be 100% sure the filter can handle the bioload."
    },
    "i_intro_fishless_dark_cycling": {
      "type": "instruction",
      "text_template": "The tank is now cycling in the dark. There is nothing to look at, but invisible work is happening. Do not be tempted to turn on lights."
    },
    "i_intro_fishless_dark_start": {
      "type": "instruction",
      "text_template": "You are doing a 'Dark Start'. By keeping lights OFF and plants OUT, we prevent algae while the filter matures. It requires patience but guarantees a cleaner start."
    },
    "i_intro_fishless_light_ammonia_maintenance": {
      "type": "instruction",
      "text_template": "We are now maintaining the ammonia levels while waiting for the bacteria to catch up. **Continue your daily lighting schedule.**"
    },
    "i_intro_fishless_light_cycle_setup": {
      "type": "instruction",
      "text_template": "You are performing a traditional Fishless Cycle. You will dose ammonia to build the filter, but with lights (and plants) running.",
      "conditions": []
    },
    "i_intro_fishless_light_cycle_verification": {
      "type": "instruction",
      "text_template": "The cycle seems finished. Let's verify before moving forward. We need to be 100% sure the filter can handle the bioload."
    },
    "i_intro_fishless_light_transition_success": {
      "type": "instruction",
      "text_template": "Your Fishless Cycle is complete! The bacteria can process ammonia and nitrite instantly. It is time to make the tank safe for fish.",
      "conditions": []
    },
    "i_intro_routine_forever": {
      "type": "instruction",
      "text_template": "Welcome to the 'Forever' phase. Consistency is key. Regular maintenance prevents 'Old Tank Syndrome' and keeps algae away."
    },
    "i_intro_silent_fert_aquasoil_delay": {
      "type": "instruction",
      "text_template": "Plants are hungry, but if you are using Aquasoil, **do NOT dose liquid fertilizer for the first 2 weeks**. The soil leaches excess nutrients already.",
      "conditions": [
        "setup.substrate_type == 'aquasoil'"
      ]
    },
    "i_intro_silent_fert_inert_start": {
      "type": "instruction",
      "text_template": "You are using inert substrate, so start liquid fertilizer dosing immediately.",
      "conditions": [
        "setup.substrate_type != 'aquasoil'",
        "products.fertilizer_micros.selected == true"
      ]
    },
    "i_intro_silent_growth_watch": {
      "type": "instruction",
      "text_template": "The goal of a Silent Cycle is... silence. If the plants are healthy, you should see 0 Ammonia and 0 Nitrite continuously."
    },
    "i_intro_silent_ready_for_stocking": {
      "type": "instruction",
      "text_template": "If your tests show 0 ppm Ammonia and Nitrite, and your plants are showing new growth, the tank is ready for the first inhabitants."
    },
    "i_intro_silent_setup": {
      "type": "instruction",
      "text_template": "We are using 'Silent Cycling'. By planting heavily from Day 1, the plants will consume the ammonia directly."
    },
    "i_intro_transition_maturity": {
      "type": "instruction",
      "text_template": "Your ecosystem is established! Tests are stable and the water is clean. We can now optimize the tank for maximum growth.",
      "conditions": []
    },
    "i_light_dark_rule": {
      "type": "instruction",
      "text_template": "Verify that all light sources are disabled. Light is the enemy of the Dark Start.",
      "conditions": [
        "modifiers.includes('light:off')"
      ]
    },
    "i_light_on_6h_for_plants": {
      "type": "instruction",
      "text_template": "**Lights ON.** Set your lights to **6 hours daily**. Your plants need energy to consume the ammonia. Without light, they will starve and rot, causing an ammonia spike.",
      "conditions": []
    },
    "i_light_ramp_strategy": {
      "type": "instruction",
      "text_template": "Strategy: **Start Lights Low.** We will set your lights to **50–60%** intensity initially. Your plants are currently in transplant shock and growing roots, not leaves. If you blast them with 100% light now, they can't use it, but **Algae** can. We will ramp up the power slowly over the next 6 weeks. Increase intensity a little each week; if algae appears, pause the ramp until the tank stabilizes."
      ,
      "conditions": [
        "setup.lighting_system == 'high_performance'"
      ]
    },
    "i_light_turn_on_guidance": {
      "type": "instruction",
      "text_template": "Turn on your lights! We start with a short duration and **50% intensity** to prevent algae shock while the ecosystem settles.",
      "conditions": []
    },
    "t_light_confirm_off": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Confirm: Lights Unplugged/OFF.",
      "conditions": [
        "modifiers.includes('light:off')"
      ]
    },
    "t_light_ramp_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Increase Light Intensity by 5–10% every week.",
      "conditions": [
        "modifiers.includes('light:ramp')"
      ]
    },
    "t_light_set_6h": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Set light timer to 6 hours.",
      "conditions": [
        "!modifiers.includes('light:off')"
      ]
    },
    "i_maint_filter_do_not_clean_early": {
      "type": "instruction",
      "text_template": "Do NOT clean your filter yet. The brown sludge building up inside is the bacterial colony we are trying to grow."
    },
    "i_maint_wc_inert_emergency": {
      "type": "instruction",
      "text_template": "Emergency Water Change: Only change water if Ammonia > 1.0ppm.",
      "conditions": [
        "setup.substrate_type != 'aquasoil'"
      ]
    },
    "i_maint_wc_nitrite_rule": {
      "type": "instruction",
      "text_template": "Rule: If Ammonia or Nitrite is above 0.5 ppm, perform a 50% water change immediately.",
      "conditions": [
        "livestock.has_fish == true || livestock.has_shrimp == true"
      ]
    },
    "i_maint_wc_reset": {
      "type": "instruction",
      "text_template": "Perform a massive **70–80% Water Change**. \n\n**Why?** Your Nitrate levels are likely very high from the cycling process. We need to 'reset' the water to safe levels (Nitrate < 30ppm) before the fish arrive.",
      "conditions": []
    },
    "t_maint_filter_clean_monthly": {
      "type": "task",
      "cadence": "monthly",
      "text_template": "Rinse filter sponges in old tank water. Never use tap water.",
      "conditions": []
    },
    "t_maint_prep_conditioner_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Add {{doses.detoxifier_conditioner.wc_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}} to the bucket.",
      "conditions": [
        "source_water.has_chlorine == true",
        "products.detoxifier_conditioner.selected == true"
      ]
    },
    "t_maint_prep_gh_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Dissolve {{doses.gh_remineralizer.gh_remineralizer_g_wc_range}} {{products.gh_remineralizer.dose_unit}} of {{products.gh_remineralizer.display_name}} in the bucket.",
      "conditions": [
        "products.gh_remineralizer.selected == true",
        "!products.gh_kh_remineralizer.selected"
      ]
    },
    "t_maint_prep_ghkh_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Dissolve {{doses.gh_kh_remineralizer.wc_dose_amount}} {{products.gh_kh_remineralizer.dose_unit}} of {{products.gh_kh_remineralizer.display_name}} in the bucket.",
      "conditions": [
        "products.gh_kh_remineralizer.selected == true"
      ]
    },
    "t_maint_prep_kh_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Dissolve {{doses.kh_buffer.kh_buffer_g_wc_range}} {{products.kh_buffer.dose_unit}} of {{products.kh_buffer.display_name}} in the bucket.",
      "conditions": [
        "products.kh_buffer.selected == true",
        "!products.gh_kh_remineralizer.selected"
      ]
    },
    "t_maint_trim_melting_plants": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Trim and remove any melting leaves/stems.",
      "conditions": []
    },
    "t_maint_wc_aquasoil_frequent": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Perform a 30-50% water change. Remove excess ammonia leaching from the new soil to prevent algae.",
      "conditions": [
        "setup.substrate_type == 'aquasoil'"
      ]
    },
    "t_maint_wc_nitrite_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Conditional: If Nitrite is **> 0.5 ppm**, perform a 50% water change immediately.",
      "conditions": [
        "setup.can_test_nitrite == true"
      ]
    },
    "t_maint_wc_reset": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Drain and refill 70–80% of the tank water.",
      "conditions": []
    },
    "t_maint_wc_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Perform a {{derived.weekly_water_change_percent_range}}% water change.",
      "conditions": []
    },
    "i_plant_dense_planting_advice": {
      "type": "instruction",
      "text_template": "Plant as densely as possible. The more plant mass you have, the safer your tank will be."
    },
    "i_plant_epiphytes_advice": {
      "type": "instruction",
      "text_template": "Planting Epiphytes (Anubias/Buce): Glue or tie them to hardscape. If you bury the rhizome in the substrate, they will rot.",
      "conditions": [
        "plants.has_epiphytes == true"
      ]
    },
    "i_plant_mist_during_setup": {
      "type": "instruction",
      "text_template": "Keep a spray bottle handy and mist plants during setup so they don't dry out.",
      "conditions": [
        "setup.plants_present_in_plan == true"
      ]
    },
    "i_plant_prep_remove_wool": {
      "type": "instruction",
      "text_template": "Remove pots and rock wool from plants, then gently rinse the roots.",
      "conditions": [
        "setup.plants_present_in_plan == true"
      ]
    },
    "i_plant_stems_advice": {
      "type": "instruction",
      "text_template": "Planting Stems: Trim the bottom inch off and remove lower leaves. Plant in small bunches to encourage new root growth.",
      "conditions": [
        "plants.has_stems == true"
      ]
    },
    "t_plant_epiphytes_attach": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Plant your Epiphytes on hardscape. Glue or tie them; never bury the rhizome.",
      "conditions": [
        "plants.has_epiphytes == true"
      ]
    },
    "t_plant_root_tabs_insert": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Insert root tabs deep into the substrate beneath your heavy root feeders.",
      "conditions": [
        "plants.has_root_feeders == true"
      ]
    },
    "t_plant_stems_plant": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Plant your Stems.",
      "conditions": [
        "plants.has_stems == true"
      ]
    },
    "i_stock_add_in_batches_weekly": {
      "type": "instruction",
      "text_template": "Add fish in small batches (e.g., 6–8 at a time) and wait one week between groups. Adding everyone at once creates a massive ammonia spike that your filter cannot process instantly. Gradual stocking keeps your water safe.",
      "conditions": []
    },
    "i_stock_cleanup_crew_start_light": {
      "type": "instruction",
      "text_template": "We start with a 'Cleaning Crew' (Snails/Shrimp/Oto). Stock light!"
    },
    "i_stock_detox_advice": {
      "type": "instruction",
      "text_template": "Safety tip: Use a conditioner that detoxifies ammonia/nitrite. It acts like an emergency brake for up to 24 hours while you fix the root cause.",
      "conditions": [
        "products.detoxifier_conditioner.selected == true"
      ]
    },
    "i_stock_ds_timing": {
      "type": "instruction",
      "text_template": "Your filter is cycled and ready. You can add livestock immediately. However, if the water is very cloudy from planting, it is safer to wait 24 hours for the dust to settle.",
      "conditions": []
    },
    "i_stock_feed_every_other_day_guidance": {
      "type": "instruction",
      "text_template": "Feed lightly — **every other day**. New fish will beg whenever they see you; ignore them. One tiny pinch per fish. If food hits the bottom, you fed too much.",
      "conditions": []
    },
    "i_stock_feed_every_other_day_long_haul": {
      "type": "instruction",
      "text_template": "Feeding Rule: **Every Other Day.** \n\n**Is this permanent?** \nYes! Adult community fish thrive on this schedule. It prevents obesity and keeps your water crystal clear. \n\n**Exceptions:** \nIf you have **Baby Fish** or **Nano species** (like Pea Puffers), you must feed daily. For everyone else, skip the guilt and skip the day.",
      "conditions": []
    },
    "i_stock_fish_acclimation_guide": {
      "type": "instruction",
      "text_template": "To acclimate fish, turn off the light and float the sealed bag for 15 minutes to equalize temperature. Then, open the bag (or move fish to a bucket) and add a small cup of tank water every 5 minutes for 20 minutes. Finally, **net the fish out** into the tank. Never pour the store water into your aquarium.",
      "conditions": []
    },
    "i_stock_fish_gasping_emergency": {
      "type": "instruction",
      "text_template": "Safety Check: Are your fish hanging near the surface or gasping? This is **Nitrite Poisoning** (suffocation), not hunger. If you see this, perform an immediate water change.",
      "conditions": [
        "livestock.has_fish == true"
      ]
    },
    "i_stock_shrimp_acclimation_guide": {
      "type": "instruction",
      "text_template": "Shrimp require **drip acclimation**. Place them in a container below the tank. Siphon tank water down using airline tubing, tying a knot in the tube to restrict flow to 1-2 drops per second. Let this run for 45-60 minutes (until the water volume triples) before netting them in.",
      "conditions": [
        "livestock.has_shrimp == true"
      ]
    },
    "i_stock_shrimp_wait_warning": {
      "type": "instruction",
      "text_template": "Planning to add shrimp? **Wait 2–4 weeks.** They need a mature tank with biofilm and algae to graze. Adding them too early is risky.",
      "conditions": [
        "livestock.has_shrimp == true"
      ]
    },
    "t_stock_detoxifier_dose_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Add {{doses.detoxifier_conditioner.emergency_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}} (binds ammonia/nitrite).",
      "conditions": [
        "products.detoxifier_conditioner.selected == true"
      ]
    },
    "t_stock_feed_every_other_day": {
      "type": "task",
      "cadence": "interval",
      "every_days": 2,
      "text_template": "Feed a tiny pinch per fish (every other day).",
      "conditions": [
        "livestock.has_fish == true"
      ]
    },
    "t_stock_fish_acclimate": {
      "type": "task",
      "cadence": "per_event",
      "text_template": "Acclimate fish before adding to tank.",
      "conditions": [
        "livestock.has_fish == true"
      ]
    },
    "t_stock_shrimp_acclimate": {
      "type": "task",
      "cadence": "per_event",
      "text_template": "Drip acclimate shrimp before adding them to tank.",
      "conditions": [
        "livestock.has_shrimp == true"
      ]
    },
    "i_water_chlorine_treat_full_volume": {
      "type": "instruction",
      "text_template": "Since you have chlorine/chloramine, we must treat the full tank volume. If using a hose, add the conditioner to the tank *before* filling.",
      "conditions": [
        "source_water.has_chlorine == true",
        "products.detoxifier_conditioner.selected == true"
      ]
    },
    "i_water_drain_90_intro": {
      "type": "instruction",
      "text_template": "Drain the tank down to about 90% to remove built-up waste before planting.",
      "conditions": []
    },
    "i_water_fill_prep_bag_or_plate": {
      "type": "instruction",
      "text_template": "Time to fill! Place a plastic bag or plate on the substrate and pour water onto **that** to prevent clouding."
    },
    "t_water_conditioner_dose_full_fill": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Add {{doses.detoxifier_conditioner.fullfill_dose_amount}} {{products.detoxifier_conditioner.dose_unit}} of {{products.detoxifier_conditioner.display_name}}.",
      "conditions": [
        "source_water.has_chlorine == true",
        "products.detoxifier_conditioner.selected == true"
      ]
    },
    "t_water_drain_90": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Drain the tank almost fully (90%) to remove accumulated Nitrates.",
      "conditions": []
    },
    "t_water_fill_tank": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Fill the tank with water.",
      "conditions": []
    },
    "t_water_gh_dose_full_fill": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Dissolve {{doses.gh_remineralizer.fullfill_dose_amount}} {{products.gh_remineralizer.dose_unit}} of {{products.gh_remineralizer.display_name}} before filling.",
      "conditions": [
        "products.gh_remineralizer.selected == true",
        "!products.gh_kh_remineralizer.selected"
      ]
    },
    "t_water_ghkh_dose_full_fill": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Dissolve {{doses.gh_kh_remineralizer.fullfill_dose_amount}} {{products.gh_kh_remineralizer.dose_unit}} of {{products.gh_kh_remineralizer.display_name}} before filling.",
      "conditions": [
        "products.gh_kh_remineralizer.selected == true"
      ]
    },
    "t_water_kh_dose_full_fill": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Dissolve {{doses.kh_buffer.fullfill_dose_amount}} {{products.kh_buffer.dose_unit}} of {{products.kh_buffer.display_name}} before filling.",
      "conditions": [
        "products.kh_buffer.selected == true",
        "!products.gh_kh_remineralizer.selected"
      ]
    },
    "t_water_top_off_interval": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Top off evaporated water with freshwater.",
      "conditions": []
    },
    "i_chem_baseline_ph_gh_kh": {
      "type": "instruction",
      "text_template": "Measure your baseline pH, GH, and KH so we know your starting water chemistry.",
      "conditions": []
    },
    "i_chem_completion_test_fail_back": {
      "type": "instruction",
      "text_template": "If the test fails (ammonia or nitrite above 0), return to the previous phase and keep cycling for a few more days."
    },
    "i_chem_conditioner_binding_note": {
      "type": "instruction",
      "text_template": "Note: Water conditioners only 'bind' ammonia for ~24 hours to protect fish; they do not remove it. You must keep testing."
    },
    "i_chem_nitrate_progress_check": {
      "type": "instruction",
      "text_template": "Check Nitrates once a week. If Nitrates are rising, it confirms your bacteria are successfully converting the toxic Nitrite.",
      "conditions": [
        "setup.can_test_nitrate == true"
      ]
    },
    "i_chem_nitrite_watch": {
      "type": "instruction",
      "text_template": "Start checking Nitrite. It will likely be 0 ppm for a while, but as soon as it registers on the test (turns purple), we have officially entered the next phase.",
      "conditions": [
        "setup.can_test_nitrite == true"
      ]
    },
    "i_chem_wait_24h_before_test": {
      "type": "instruction",
      "text_template": "Wait exactly 24 hours after dosing ammonia before performing the final tests. Do not test early."
    },
    "t_chem_ammonia_test_24h": {
      "type": "task",
      "cadence": "per_event",
      "text_template": "Measure and log Ammonia after 24 hours.",
      "conditions": [
        "setup.can_test_ammonia == true"
      ]
    },
    "t_chem_ammonia_test_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Measure and log Ammonia.",
      "conditions": [
        "setup.can_test_ammonia == true"
      ]
    },
    "t_chem_ammonia_test_interval": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Measure and log Ammonia.",
      "conditions": [
        "setup.can_test_ammonia == true"
      ]
    },
    "t_chem_gh_test_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Measure and log GH.",
      "conditions": [
        "setup.can_test_gh == true"
      ]
    },
    "t_chem_kh_test_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Measure and log KH.",
      "conditions": [
        "setup.can_test_kh == true"
      ]
    },
    "t_chem_nitrate_test_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Measure and log Nitrates.",
      "conditions": [
        "setup.can_test_nitrate == true"
      ]
    },
    "t_chem_nitrite_test_24h": {
      "type": "task",
      "cadence": "per_event",
      "text_template": "Measure and log Nitrite after 24 hours.",
      "conditions": [
        "setup.can_test_nitrite == true"
      ]
    },
    "t_chem_nitrite_test_daily": {
      "type": "task",
      "cadence": "daily",
      "text_template": "Measure and log Nitrite.",
      "conditions": [
        "setup.can_test_nitrite == true"
      ]
    },
    "t_chem_nitrite_test_interval": {
      "type": "task",
      "cadence": "interval",
      "every_days": 3,
      "text_template": "Measure and log Nitrite.",
      "conditions": [
        "setup.can_test_nitrite == true"
      ]
    },
    "t_chem_ph_test_once": {
      "type": "task",
      "cadence": "one_time",
      "text_template": "Measure and log pH.",
      "conditions": [
        "setup.can_test_ph == true"
      ]
    },
    "t_chem_ph_test_weekly": {
      "type": "task",
      "cadence": "weekly",
      "text_template": "Measure and log pH.",
      "conditions": [
        "setup.can_test_ph == true"
      ]
    }
  }
}
